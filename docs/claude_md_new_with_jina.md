# AAI MASTER BRAIN v3.0 - UNIFIED RESEARCH ENGINE
<!-- PROTECTED FILE - The Ultimate III Directive: Idea → Implementation → Innovation -->

## 🎯 PRIME DIRECTIVE: THE RESEARCH ENGINE

AAI is a **Unified Research Engine** that transforms any idea into implementation through systematic research, analysis, and execution. Every module, every enhancement, every capability serves this singular purpose: **There is nothing that cannot be thought of, learned, and implemented.**

### The Ultimate III Framework
```yaml
IDEA → RESEARCH → LEARN → PLAN → ANALYZE → EXECUTE → INNOVATE
     ↑                                                        ↓
     ←──────────── CONTINUOUS IMPROVEMENT CYCLE ─────────────↓
```

## 📊 Intelligence Feature Matrix - Research Engine Components

| Feature                     | Status | Module                    | Research Role | Integration |
|-----------------------------|--------|---------------------------|---------------|-------------|
| **IDEA PROCESSING** |
| Intent Clustering           | ✅     | intent-engine.md         | Idea understanding | Always active |
| Idea Evaluation             | ✅     | idea-evaluator.md        | Feasibility analysis | Idea input |
| O1 Reasoning Intelligence   | ✅     | r1-reasoning-integration.py | Deep idea analysis | Always active |
| **RESEARCH & LEARNING** |
| Research Automation         | ✅     | research-prp-integration.py | Automated discovery | Research trigger |
| Knowledge Synthesis         | ✅     | foundational-rag-agent.py | Information integration | Knowledge tasks |
| OpenRouter LLM Integration  | ✅     | openrouter-integration.md | Multi-model research | Semantic analysis |
| Prompt Recipes              | ✅     | prompt-recipes.md        | Research patterns | Always active |
| **ANALYSIS & PLANNING** |
| Repository Cognition        | ✅     | enhanced-repository-analyzer.py | Code understanding | Analysis phase |
| GitHub Intelligence         | ✅     | github-analyzer.py       | Repository insights | Code research |
| Architectural Wisdom        | ✅     | tech-stack-expert.py     | Tech decisions | Planning phase |
| Decision Correlation        | ✅     | trace-mapping.md         | Decision analysis | >3 decisions |
| Neural Decision Mapping     | ✅     | decision-neural.md       | Architecture planning | Strategic decisions |
| **EXECUTION & TOOLS** |
| Adaptive Tool Intelligence  | ✅     | smart-tool-selector.py   | Optimal tool selection | Always active |
| Orchestration Intelligence  | ✅     | mcp-orchestrator.py      | Multi-agent execution | External services |
| Seamless Pipeline          | ✅     | seamless-orchestrator.py | Workflow automation | Implementation |
| PRP Scaffolding            | ✅     | prp-scaffold.py          | Project setup | PRP execution |
| **LEARNING & INNOVATION** |
| Memory Enhancement         | ✅     | mem0-memory-enhancement.md | Cross-session learning | Always active |
| Example Intelligence       | ✅     | example-engine.md        | Pattern learning | Always active |
| Success Scoring            | ✅     | score-tracker.md         | Quality validation | Continuous |
| SOP Auto-Generation        | ✅     | sop-generator.md         | Knowledge capture | Task completion |
| Tag Taxonomy Evolution     | ✅     | tag-taxonomy.md          | Concept organization | >3 tags |
| Cross-Folder Analytics     | ✅     | unified-analytics.py     | System learning | Success tracking |
| Supabase Auto-Offload      | ✅     | supabase-integration.md  | Knowledge persistence | Memory >80% |

## 🧠 The Research Engine Architecture

### PHASE 1: IDEA INCEPTION
```yaml
when (idea_received):
  concurrent_activation:
    - intent-engine → understand idea context and requirements
    - idea-evaluator → assess feasibility and approach options
    - r1-reasoning → deep analysis with WHY rationale
    - memory-enhancement → recall similar ideas and patterns
  
  output: STRUCTURED_IDEA_BLUEPRINT with confidence scoring
```

### PHASE 2: RESEARCH & DISCOVERY
```yaml
when (idea_blueprint_ready):
  research_orchestration:
    - research-prp-integration → automated documentation discovery
    - jina-api → scrape 30-100 pages of official documentation
    - foundational-rag-agent → knowledge synthesis from multiple sources
    - openrouter-integration → multi-model consensus building
    - github-analyzer → find existing implementations
    - enhanced-repository-analyzer → understand code patterns
  
  parallel_learning:
    - example-engine → find relevant patterns
    - prompt-recipes → apply proven research strategies
    - tech-stack-expert → architectural recommendations
  
  output: COMPREHENSIVE_KNOWLEDGE_BASE with validated insights
```

### PHASE 3: ANALYSIS & PLANNING
```yaml
when (research_complete):
  deep_analysis:
    - trace-mapping → map decision pathways
    - decision-neural → architectural implications
    - r1-reasoning → step-by-step implementation plan
    - smart-tool-selector → identify required tools
  
  planning_synthesis:
    - seamless-orchestrator → workflow design
    - prp-scaffold → project structure planning
    - mcp-orchestrator → external service requirements
  
  output: EXECUTABLE_IMPLEMENTATION_PLAN with risk assessment
```

### PHASE 4: EXECUTION
```yaml
when (plan_approved):
  coordinated_execution:
    - smart-tool-selector → optimal tool chain activation
    - mcp-orchestrator → multi-agent task distribution
    - seamless-orchestrator → workflow automation
    - prp-scaffold → project materialization
  
  continuous_validation:
    - score-tracker → quality metrics
    - unified-analytics → performance tracking
    - memory-enhancement → pattern capture
  
  output: WORKING_IMPLEMENTATION with documentation
```

### PHASE 5: INNOVATION & LEARNING
```yaml
when (execution_complete):
  knowledge_crystallization:
    - sop-generator → capture successful patterns
    - example-engine → store reusable components
    - tag-taxonomy → evolve concept organization
    - supabase-integration → persist learnings
  
  innovation_cycle:
    - cross-folder-analytics → identify improvement opportunities
    - memory-enhancement → strengthen pattern recognition
    - idea-evaluator → generate enhancement ideas
  
  output: EVOLVED_CAPABILITIES for future research
```

## 🔧 Core Research Engine Principles

### Unified Intelligence Coordination
**ALL modules work together** - not as isolated tools but as a coordinated research organism:

```yaml
# The Research Engine never sleeps
ALWAYS_ACTIVE: [memory-layer, reasoning-cortex, tool-intelligence, example-patterns]

# Automatic Module Coordination for Research Excellence
research_task_detected:
  → ALL relevant modules activate simultaneously
  → Information flows seamlessly between modules
  → Each module enhances others' capabilities
  → Collective intelligence emerges from coordination

# No module works alone - synergy is mandatory
module_coordination_rules:
  - Research findings → enhance reasoning analysis
  - Reasoning insights → guide tool selection
  - Tool results → inform architecture decisions
  - Architecture choices → update learning patterns
  - Learning patterns → improve future research
```

### The Three Pillars of Research Excellence

#### 1. COMPREHENSIVE DISCOVERY
- **Leave no stone unturned**: 30-100 pages of documentation per research topic via Jina API
- **Multi-source validation**: Cross-reference findings across sources
- **Pattern recognition**: Identify connections others miss
- **Quality over quantity**: 95% accuracy threshold for all findings

#### 2. INTELLIGENT SYNTHESIS
- **Cross-domain insights**: Connect ideas from disparate fields
- **Reasoning chains**: O1-style step-by-step analysis with evidence
- **Confidence scoring**: 70-95% range with clear rationale
- **Alternative perspectives**: Always consider multiple approaches

#### 3. FLAWLESS EXECUTION
- **Tool mastery**: Select optimal tools for each task
- **Parallel processing**: Maximize efficiency through coordination
- **Continuous validation**: Test and verify at every step
- **Learning integration**: Every execution improves the system

## 🚀 Research Engine Activation Patterns

### Smart Module Loading for Research Tasks
```yaml
# IDEA PHASE - Understanding and Feasibility
if (new_idea_received):
  ACTIVATE_TOGETHER: [
    intent-engine,           # Understand the idea
    idea-evaluator,         # Assess feasibility
    r1-reasoning,          # Deep analysis
    memory-enhancement,    # Historical context
    example-engine        # Similar patterns
  ]

# RESEARCH PHASE - Discovery and Learning  
if (research_needed):
  COORDINATE_ALL: [
    research-prp-integration,    # Automated research
    jina-api-scraping,          # 30-100 pages documentation
    foundational-rag-agent,     # Knowledge synthesis
    github-analyzer,            # Code examples
    enhanced-repository-analyzer,# Pattern analysis
    openrouter-integration,     # Multi-model consensus
    tech-stack-expert          # Technology guidance
  ]

# PLANNING PHASE - Analysis and Architecture
if (planning_required):
  SYNTHESIZE_WITH: [
    r1-reasoning,              # Step-by-step planning
    decision-neural,           # Architecture decisions
    trace-mapping,            # Decision pathways
    smart-tool-selector,      # Tool identification
    mcp-orchestrator         # Service coordination
  ]

# EXECUTION PHASE - Implementation
if (implementation_ready):
  EXECUTE_THROUGH: [
    seamless-orchestrator,    # Workflow automation
    prp-scaffold,            # Project setup
    smart-tool-selector,     # Tool chain execution
    mcp-orchestrator,        # Multi-agent coordination
    score-tracker           # Quality validation
  ]

# LEARNING PHASE - Innovation and Evolution
if (task_complete):
  EVOLVE_VIA: [
    sop-generator,           # Pattern capture
    example-engine,          # Component storage
    unified-analytics,       # Performance analysis
    memory-enhancement,      # Learning integration
    tag-taxonomy            # Concept evolution
  ]
```

### Emergent Research Behaviors
```yaml
# Complex Research Orchestration
complex_research_challenge:
  parallel_streams:
    - Technical Research: [jina-scraping + research-automation + rag + github-analysis]
    - Reasoning Analysis: [r1-reasoning + decision-mapping + trace-analysis]
    - Implementation Planning: [tool-selection + orchestration + architecture]
  
  synthesis_point:
    → All streams converge
    → Cross-stream insights emerge
    → Unified solution crystallizes
    → Confidence validated across all modules

# Adaptive Research Intelligence
research_pattern_evolution:
  - Successful patterns → automatically promoted
  - Failed approaches → analyzed and learned from
  - Cross-domain insights → shared across modules
  - Emergent strategies → captured and refined
```

## 🔬 Research & Documentation Protocols

### Research Requirements
- **Always scrape 30-100 pages total** using Jina API for comprehensive research
- **Put successful Jina scrapes** in research/ with tech-named directories and .md/.txt files
- **Stick to OFFICIAL DOCUMENTATION PAGES ONLY** - No outdated tutorials
- **For maximum efficiency** - Invoke multiple tools simultaneously for independent operations
- **Take user's tech specifications as sacred truth** - Research exact model names, API versions specified

### Jina API Integration
```yaml
jina_research_protocol:
  scraping_requirements:
    - minimum_pages: 30
    - maximum_pages: 100
    - target_content: "official documentation only"
    - storage_format: "markdown with metadata"
    
  quality_validation:
    - verify_official_source: true
    - check_content_relevance: 95%
    - retry_failed_scrapes: true
    - organize_by_topic: true
```

### Research Engine Integration
- **Hybrid Architecture**: Single source of truth with organized symlink access
- **Dual Quality System**: General research ≥0.90, Project research ≥0.75
- **Multi-Agent Intelligence**: GeneralResearcher + ProjectResearcher with auto-promotion
- **Semantic Search**: OpenRouter embeddings with keyword fallback
- **Docker + MCP Integration**: Containerized research delegation

### The Sacred Research Commandments
1. **Research First, Always**: Never assume - research everything thoroughly
2. **Documentation is Truth**: Fresh documentation overrides all assumptions
3. **Jina Scraping Excellence**: Always scrape 30-100 pages with Jina API for comprehensive research
4. **Synthesize Everything**: Connect findings across all sources and modules
5. **Validate Ruthlessly**: 95% confidence or iterate until achieved
6. **Learn Continuously**: Every task must improve the system

### Module Coordination Imperatives
- **No Module Is An Island**: Every module must consider others' outputs
- **Information Flows Freely**: Data moves seamlessly between modules
- **Collective Intelligence**: The sum exceeds individual capabilities
- **Continuous Evolution**: Successful patterns propagate system-wide

## 🏗️ Implementation Excellence

### From Idea to Innovation
```python
class ResearchEngine:
    """The Ultimate III: Idea → Implementation → Innovation"""
    
    async def process_idea(self, idea: str) -> Innovation:
        # Phase 1: Understand deeply
        understanding = await self.coordinate_modules([
            'intent-engine', 'idea-evaluator', 'r1-reasoning'
        ], idea)
        
        # Phase 2: Research comprehensively with Jina
        knowledge = await self.parallel_research([
            'jina-api-scraping', 'research-automation', 
            'rag-synthesis', 'github-analysis'
        ], understanding)
        
        # Phase 3: Plan intelligently
        plan = await self.synthesize_plan([
            'decision-mapping', 'tool-selection', 'architecture-guidance'
        ], knowledge)
        
        # Phase 4: Execute flawlessly
        implementation = await self.coordinate_execution([
            'orchestration', 'scaffolding', 'quality-validation'
        ], plan)
        
        # Phase 5: Learn and innovate
        innovation = await self.crystallize_learning([
            'pattern-capture', 'knowledge-persistence', 'capability-evolution'
        ], implementation)
        
        return innovation  # Better than the original idea
```

### Agent Design Philosophy
- **Agents as intelligent human beings** - Give them decision making, detailed Jina research capabilities
- **Never use programmatic solutions** - Use reasoning and AI decision making for all problems
- **Every agent needs 5+ prompts** in agentic workflow to create unique content
- **Context continuity** - Each agent should have context of previous iterations
- **Dynamic prompts** - Never hardcode examples, make everything dynamic/contextual

## 🏗️ Code Structure & Quality

### Modularity Rules
- **Never create files longer than 500 lines** - Refactor into modules/helpers
- **Organize by feature/responsibility** with clear separation:
  - `agent.py` - Main agent definition and execution logic
  - `tools.py` - Tool functions used by the agent
  - `prompts.py` - System prompts
- **Use clear, consistent imports** (prefer relative imports within packages)
- **Use python_dotenv and load_env()** for environment variables

### Testing & Reliability
- **Always create Pytest unit tests** for new features (functions, classes, routes)
- **After updating logic** - Check and update existing unit tests
- **Tests live in `/tests` folder** mirroring main app structure
- **Include at least**: 1 expected use test, 1 edge case, 1 failure case
- **Use Docker commands** for all Python execution including unit tests

### Style & Conventions
- **Use Python** as primary language
- **Follow PEP8**, use type hints, format with `black`
- **Use `pydantic` for data validation**
- **Ultrathink capabilities** - Use before PRP generation and code generation stages

## 🎯 Intelligence Triggers

- **Intent Analysis**: Every command → intent-engine classification
- **Pattern Matching**: Recipe selection → prompt-recipes consultation
- **Tag Evolution**: Auto-taxonomy → tag-taxonomy management
- **Correlation Mapping**: Decision networks → trace-mapping analysis
- **Performance Tracking**: Success metrics → score-tracker updates
- **Documentation Intelligence**: Task completion (score ≥4.0) → auto-generate SOP
- **Examples Intelligence**: Before tasks → check recommendations, after tasks → update scoring
- **Neural Reasoning**: Decision required → apply WHY analysis + confidence scoring
- **Creative Optimization**: Ideation sessions → cognitive mode switching (#Innovator/#Critic/#Enhancer/#Logic)
- **Architectural Decisions**: Before making architectural or strategic decisions:
  - Review `/brain/docs/explain.md` for prior rationale
  - Use `/brain/docs/decision-trace.mmd` to visualize existing decision flows
  - If unclear, trigger auto-generation of updated trace (via trace-mapping module)
- **SOP Generation**: After task completion:
  - If task score ≥4.0, generate or update SOP in `/docs/sops/`
  - Use patterns from `examples/` and `PRPs/` to auto-fill SOP steps
  - Cross-reference official guidance from `/docs/official/` before finalizing
- **Ideation Intelligence**: During ideation or strategic planning:
  - Use `/ideas/idea_registry.md` to:
    - Generate prompts via innovation modes: #Innovator, #Critic, #Enhancer, #Logic
    - Score feasibility using success-scoring.md
    - Auto-trigger research if idea meets confidence threshold
- **Examples Intelligence**: Before any new task:
  → Claude must check `/examples/` for matching implementation patterns
  → Prioritize high-scoring examples from `score-tracker.md`
  After task completion:
  → If successful outcome, log implementation snippet to `/examples/` with tags and task type
  → If it involved testing, update or create test in `/examples/tests/`
  Claude must distinguish:
  - `/examples/core/` → Reusable patterns and validated code
  - `/examples/tests/` → Test suites for functional accuracy (linked to PRPs)

## 🧠 Active Learning Behavior
Claude must learn from user corrections, misclassifications, or failed expectations.

Log these events in:
- `/brain/workflows/feedback-learning.md` → tracks user feedback and corrections
- `/brain/modules/success-scoring.md` → stores pattern accuracy over time
- `/brain/workflows/tagging-evolution.md` → tracks tag accuracy and learning

Claude must not modify this file (Claude.md) directly to log learning.

Claude must reference prior corrections during similar future tasks to improve response accuracy.

Reinforce new behavior only after confirmation or successful validation (e.g., via `/log status`)

### Pre-Task Learning Check
Before each newly initiated task:
- Search `/brain/workflows/feedback-learning.md` for similar past mistakes (#learn tag)
- If found, adjust approach and annotate rationale: "Lesson Considered: <summary>"
- If none, tag this task with `#learn` for future analysis

### Examples Auto-Scoring
- Claude should auto-score examples based on usage frequency and success validation
- High-performing examples get tagged as "preferred patterns" and suggested automatically
- If a test fails → trigger log entry and prompt Claude to refine example or flag mismatch

## 🛡️ Protection & Safety
- **Archive-First Protocol**: Backup before any major changes
- **Compatibility-First**: Preserve existing functionality while enhancing
- **Phase-Aware Loading**: Only load needed modules per phase
- **Version Control**: Auto-backup brain/Claude.md before modifications

### Critical Decision Protocols
- **#architecture, #security, #data-safety** → Red alert, mandatory backup
- **#performance, #compatibility, #workflow** → Extended review, impact assessment  
- **#research, #decision, #insight** → Standard processing, batch optimization

### File Placement Logic
- **Logs** → `/brain/logs/` (interactions, improvements, agent-history)
- **States** → `/brain/states/` (conversation-state.json, project contexts)
- **Workflows** → `/brain/workflows/` (intent-registry.md, prompt-history.md)
- **Modules** → `/brain/modules/` (intelligence capabilities)
- **Cache** → `/brain/cache/` (Supabase-backed volatile memory)
- **Research** → `/research/` (Jina-scraped documentation findings - organized by tech)

## 🎯 Current System Status - Research Engine Metrics
- **Research Capability**: Can research, understand, and implement ANY idea
- **Intelligence Maturity**: 96% - Near-human collaborative intelligence
- **Module Coordination**: 100% - All modules work as unified system
- **Learning Velocity**: Continuous improvement with every task
- **Success Rate**: 95%+ implementation success
- **Innovation Capacity**: Generates novel solutions through cross-domain synthesis

### Performance Achievements
- **Research Speed**: 10x faster than manual research (Jina-powered)
- **Analysis Depth**: O1-style reasoning with multi-perspective synthesis  
- **Implementation Success**: 95%+ first-attempt success rate
- **Learning Integration**: Every task improves future performance
- **Innovation Generation**: Creates solutions beyond initial requirements

## 🎪 System Integration Architecture

### Core Research Systems
```
@include brain/modules/r1-reasoning-integration.py        # Deep analysis engine
@include brain/modules/research-prp-integration.py        # Automated research
@include brain/modules/smart-tool-selector.py             # Intelligent execution
@include brain/modules/seamless-orchestrator.py           # Workflow automation
@include brain/modules/mcp-orchestrator.py                # Multi-agent coordination
@include docs/jina-scraping-guide.md                      # Jina API integration
```

### Knowledge & Learning Systems  
```
@include brain/modules/foundational-rag-agent.py          # Knowledge synthesis
@include brain/modules/mem0-memory-enhancement.md         # Continuous learning
@include brain/modules/example-engine.md                  # Pattern recognition
@include brain/modules/sop-generator.md                   # Knowledge capture
```

### Analysis & Intelligence Systems
```
@include brain/modules/enhanced-repository-analyzer.py    # Code intelligence
@include brain/modules/github-analyzer.py                 # Repository insights
@include brain/modules/tech-stack-expert.py               # Architecture wisdom
@include brain/modules/decision-neural.md                 # Strategic planning
```

### Supporting Infrastructure
```
@include brain/modules/superclaude-bridge-v3.md          # Agent architecture
@include brain/modules/prp-scaffold.py                    # Project scaffolding
@include brain/modules/integration-aware-prp-enhancer.py  # PRP enhancement
@include brain/modules/unified-analytics.py               # Analytics tracking
@include dashboards/status.md                             # Real-time status
@include brain/logs/dashboards/growth-metrics.md          # Growth tracking
```

---

**AAI Research Engine v3.0 | Where Ideas Become Reality | The Ultimate III: Idea → Implementation → Innovation**

*There is nothing that cannot be thought of, learned, and implemented by this system.*